#:import Factory kivy.factory.Factory
#:import Colors Utility.colors

<MainScreenView>:
    MDBoxLayout:
        orientation: 'vertical'

        canvas.before:
            Color:
                rgba: Colors.background_color
            Rectangle:
                size: self.size
                pos: self.pos

        MDLabel:
            text: "String Art"
            size_hint: 1, 1
            halign: 'center'

        MDBoxLayout:
            orientation: 'horizontal'
            size_hint: 1, .15
            padding: 20
            spacing: 20

            MDRectangleFlatButton:
                id: button_input_image
                text: 'Загрузить изображение'
                text_size: self.size
                font_size: 20
                bold: True
                size_hint: 5, 1
                md_bg_color: Colors.button_color
                text_color: Colors.background_color
                radius: [20]
                on_release:
                    Factory.SelectImagePins(root.return_controller(), root.return_model()).open()

            MDRectangleFlatButton:
                size_hint: 1, 1
                md_bg_color: Colors.button_color
                radius: [20]
                canvas:
                    Color:
                        rgba: Colors.background_color
                    Ellipse:
                        pos: self.center_x - 7, self.center_y - 7
                        size: 14, 14
                    Ellipse:
                        pos: self.center_x - 7, self.center_y + 12
                        size: 14, 14
                    Ellipse:
                        pos: self.center_x - 7, self.center_y - 26
                        size: 14, 14
                #on_release:
                    #root.print_h()

            MDRectangleFlatButton:
                id: button_open_project
                text: 'Сontinue the project'
                md_bg_color: Colors.button_color
                size_hint: 5, 1
                text_color: Colors.background_color
                radius: [20]
                on_release:
                    Factory.SelectProject(root.return_controller(), root.return_model()).open()

<SelectImagePins>:
    title: 'Select an image and an number pins'
    size_hint: .8, .9

    MDBoxLayout:
        orientation: 'vertical'
        padding: '20dp'

        FileChooserIconView:
            id: filechooser
            on_selection: root.model.selected_file = filechooser.selection[0]
            size_hint: 1, 10
        MDLabel:
            text: 'Number pins: ' + str(int(slider_pins_id.value))
            color: (1, 1, 1, 1)
            halign: "center"
            size_hint: 1, 1
        MDSlider:
            id: slider_pins_id
            max: 300
            min: 100
            value:200
            size_hint: 1, 1
        MDLabel:
            text: 'Number lines: ' + str(int(slider_lines_id.value))
            color: (1, 1, 1, 1)
            halign: "center"
            size_hint: 1, 1
        MDSlider:
            id: slider_lines_id
            max: 4000
            min: 1000
            value:2000
            size_hint: 1, 1
        MDLabel:
            text: 'Pixel brightness: ' + str(int(slider_pins_id.value))
            color: (1, 1, 1, 1)
            halign: "center"
            size_hint: 1, 1
        MDSlider:
            id: slider_thread_id
            max: 100
            min: 0
            value: 50
            size_hint: 1, 1
        MDRectangleFlatButton:
            id: btn_ok
            text: 'OK'
            md_bg_color: (10/255, 100/255, 10/255, 1)
            text_color: (1, 1, 1, 1)
            radius: [20]
            size_hint: 1, None
            on_release:
                root.generate_file(int(slider_pins_id.value), int(slider_lines_id.value), int(slider_thread_id.value))
                root.dismiss()
                root.controller.switch_screen('view screen')
                #Factory.ProgressGenerateImage().open()

<SelectProject>:
    title: 'Select file an project'
    size_hint: .8, .9

    MDBoxLayout:
        orientation: 'vertical'
        padding: '20dp'

        FileChooserIconView:
            id: filechooser
            on_selection: root.model.selected_file = filechooser.selection[0]
            size_hint: 1, 10

        MDRectangleFlatButton:
            id: btn_ok
            text: 'OK'
            md_bg_color: (10/255, 100/255, 10/255, 1)
            text_color: (1, 1, 1, 1)
            radius: [20]
            size_hint: 1, None
            on_release:
                root.open_project()
                root.dismiss()
                root.controller.switch_screen('view screen')